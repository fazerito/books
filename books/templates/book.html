{% extends "layout.html" %}

{% block body %}
<div id="book-info">
  <h2>{{ book.title }}</h2>
  <p>Author: {{ book.author }}</p>
  <p>Year: {{ book.year }}</p>
  <p>ISBN: {{ book.isbn }}</p>
  <p>Review Count: {{ review_count }}</p>
  <p>Average Score: {{ average_score }}</p>
</div>
<div class="wrapper">
  <form action="" method="post">
      <div class="form rate form-group">
          Rate this book!
      </div>
      <div class="form form-group">
        <div class="radios form-group">
        {{ form.radio(class="form-control form-control-lg") }}
        </div>
        <div class="form-group">
        {{ form.text.label(class="form-control-label") }}
        {% if form.text.errors %}
          {{ form.text(class="form-control form-control-lg is-invalid") }}
          <div class="invalid-feedback">
            {% for error in form.text.errors %}
              <span>{{ error }}</span>
            {% endfor %}
          </div>
        {% else %}
            {{ form.text(class="form-control form-control-lg") }}
        {% endif %}
      </div>
        <div class="form-group">
          {{ form.submit(class="btn btn-outline-info") }}
        </div>
      </div>
    </form>
  </div>
  <div class="reviews border-top pt-3">
    {% if reviews %}
      <h3>User reviews: </h3>
        <ul>
        {% for review in reviews %}
          <li> {{ review.text }}. Rating: <b>{{ review.rating }}</b>. Author: {{ review.user.name }}</li>
        {% endfor %}
      </ul>
  </div>
  {% endif %}
{% endblock %}
